# ğŸ“± MFA Flow - Diagrama Visual

## ğŸ”„ Flujo Completo de AutenticaciÃ³n Multi-Factor

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    FLUJO DE AUTENTICACIÃ“N MFA                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ LoginScreen  â”‚  Usuario ingresa email y password
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â”‚ handleLogin()
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ mfaService.login â”‚  POST /api/v1/auth-mfa/login
â”‚  (email, pass)   â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º Â¿Usuario tiene MFA habilitado?
       â”‚
       â”œâ”€[NO]â”€â”€â–º { success: true, requiresMFA: false, token: "..." }
       â”‚         â”‚
       â”‚         â–¼
       â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
       â”‚    â”‚  Dashboard   â”‚  Login exitoso
       â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â””â”€[SÃ]â”€â”€â–º { success: true, requiresMFA: true }
                 â”‚
                 â”‚ Backend genera cÃ³digo 6 dÃ­gitos
                 â”‚ Backend guarda en cache por 5 min
                 â”‚ Backend envÃ­a email vÃ­a Mailtrap
                 â”‚
                 â–¼
          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
          â”‚ MFAVerificationScreenâ”‚
          â”‚  (email recibido)    â”‚
          â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚
                 â”‚ Usuario tiene 2 opciones:
                 â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚                         â”‚
    â–¼                         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ OPCIÃ“N A:   â”‚      â”‚ OPCIÃ“N B:        â”‚
â”‚ CÃ³digo Emailâ”‚      â”‚ CÃ³digo Respaldo  â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚                      â”‚
       â”‚ Usuario abre email   â”‚ Usuario busca cÃ³digo
       â”‚ en Mailtrap          â”‚ guardado al habilitar
       â”‚                      â”‚ MFA (8 caracteres hex)
       â”‚                      â”‚
       â–¼                      â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Ingresa 6     â”‚    â”‚ Ingresa 8 caracteresâ”‚
â”‚ dÃ­gitos       â”‚    â”‚ (ej: A1B2C3D4)      â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚                       â”‚
       â”‚ verifyMFACode()       â”‚ verifyBackupCode()
       â–¼                       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ POST /verify-  â”‚    â”‚ POST /verify-backup- â”‚
â”‚     mfa        â”‚    â”‚      code            â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚                        â”‚
       â”‚ Backend verifica       â”‚ Backend verifica hash
       â”‚ cache                  â”‚ en base de datos
       â”‚                        â”‚
       â”œâ”€[âŒ]â”€â–º Error, contador++  â”‚
       â”‚       Â¿Intentos > 5?   â”‚
       â”‚       [SÃ]â”€â–º Bloqueado â”‚
       â”‚                        â”‚
       â””â”€[âœ…]â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚
                     â–¼
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚ Token JWT    â”‚
              â”‚ guardado en  â”‚
              â”‚ AsyncStorage â”‚
              â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚
                     â–¼
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚  Dashboard   â”‚  âœ… Login exitoso
              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

```

---

## âš™ï¸ ConfiguraciÃ³n de MFA

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Dashboard   â”‚  Usuario autenticado
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â”‚ Tap "ğŸ” Configurar MFA"
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ MFASettingsScreenâ”‚
â”‚                  â”‚
â”‚ Estado: âŒ Des-  â”‚
â”‚        habilitadoâ”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â”‚ Tap "ğŸ” Habilitar MFA"
       â”‚ ConfirmaciÃ³n Alert
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ POST /enable-mfa â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â”‚ Backend:
       â”‚ - Marca mfa_enabled = true
       â”‚ - Genera 8 cÃ³digos de respaldo
       â”‚ - Hashea cÃ³digos (SHA-256)
       â”‚ - Guarda en BD
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Modal con 8 cÃ³digos:          â”‚
â”‚                               â”‚
â”‚ 1. A1B2C3D4                   â”‚
â”‚ 2. E5F6G7H8                   â”‚
â”‚ 3. I9J0K1L2                   â”‚
â”‚ 4. M3N4O5P6                   â”‚
â”‚ 5. Q7R8S9T0                   â”‚
â”‚ 6. U1V2W3X4                   â”‚
â”‚ 7. Y5Z6A7B8                   â”‚
â”‚ 8. C9D0E1F2                   â”‚
â”‚                               â”‚
â”‚ âš ï¸ IMPORTANTE:                â”‚
â”‚ Guarda estos cÃ³digos en un    â”‚
â”‚ lugar seguro. Cada cÃ³digo     â”‚
â”‚ solo puede usarse UNA VEZ.    â”‚
â”‚                               â”‚
â”‚ [ğŸ“‹ Copiar Todos]             â”‚
â”‚ [He guardado mis cÃ³digos]     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

```

---

## ğŸ“§ Flujo de Email (Mailtrap)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Usuario hace login  â”‚
â”‚ con MFA habilitado  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ LaravelMFAService.php            â”‚
â”‚ generateVerificationCode()       â”‚
â”‚ â†’ Genera: "483921"               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Cache::put('mfa_code_1',         â”‚
â”‚            '483921',              â”‚
â”‚            5 minutos)             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Mail::send(new MFACodeMail())    â”‚
â”‚                                  â”‚
â”‚ EnvÃ­a a: test@example.com        â”‚
â”‚ Asunto: "CÃ³digo de VerificaciÃ³n" â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â”‚ SMTP a Mailtrap
           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Mailtrap Intercepta Email        â”‚
â”‚ (NO llega a test@example.com)    â”‚
â”‚                                  â”‚
â”‚ âœ… Visible en:                   â”‚
â”‚ https://mailtrap.io/inboxes      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Email renderizado:               â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ CÃ³digo de VerificaciÃ³n MFA   â”‚ â”‚
â”‚ â”‚                              â”‚ â”‚
â”‚ â”‚ Hola Test User,              â”‚ â”‚
â”‚ â”‚                              â”‚ â”‚
â”‚ â”‚ Tu cÃ³digo de verificaciÃ³n:   â”‚ â”‚
â”‚ â”‚                              â”‚ â”‚
â”‚ â”‚   â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—     â”‚ â”‚
â”‚ â”‚   â•‘   4  8  3  9  2  1 â•‘     â”‚ â”‚
â”‚ â”‚   â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•     â”‚ â”‚
â”‚ â”‚                              â”‚ â”‚
â”‚ â”‚ Expira en 5 minutos          â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

```

---

## ğŸ”’ Seguridad - CÃ³digos de Respaldo

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ GeneraciÃ³n (al habilitar MFA)       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Texto Plano         Hasheado (BD)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€         â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
A1B2C3D4     â†’     e4d909c290d0fb1ca068ffaddf22cbd0
E5F6G7H8     â†’     5f4dcc3b5aa765d61d8327deb882cf99
I9J0K1L2     â†’     098f6bcd4621d373cade4e832627b4f6
...              ...

Usuario guarda      Backend guarda
los 8 cÃ³digos      solo los hashes


â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ VerificaciÃ³n (al usar cÃ³digo)       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

1. Usuario ingresa: "A1B2C3D4"
2. Backend hashea:  hash('sha256', 'A1B2C3D4')
3. Backend compara con BD:
   Â¿hash existe en mfa_backup_codes?
   
   [SÃ] â†’ âœ… CÃ³digo vÃ¡lido
        â†’ Eliminar ese hash de BD
        â†’ Generar JWT token
        â†’ Login exitoso
        
   [NO] â†’ âŒ CÃ³digo invÃ¡lido
        â†’ Mostrar error
        â†’ CÃ³digo ya fue usado o no existe

```

---

## ğŸ¯ Componentes de UI

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚          MFAVerificationScreen.js                   â”‚
â”‚                                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  ğŸ” VerificaciÃ³n MFA                          â”‚ â”‚
â”‚  â”‚                                               â”‚ â”‚
â”‚  â”‚  CÃ³digo enviado a: test@example.com           â”‚ â”‚
â”‚  â”‚                                               â”‚ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â” â”Œâ”€â”€â”€â” â”Œâ”€â”€â”€â” â”Œâ”€â”€â”€â” â”Œâ”€â”€â”€â” â”Œâ”€â”€â”€â”        â”‚ â”‚
â”‚  â”‚  â”‚ 4 â”‚ â”‚ 8 â”‚ â”‚ 3 â”‚ â”‚ 9 â”‚ â”‚ 2 â”‚ â”‚ 1 â”‚        â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”˜ â””â”€â”€â”€â”˜ â””â”€â”€â”€â”˜ â””â”€â”€â”€â”˜ â””â”€â”€â”€â”˜ â””â”€â”€â”€â”˜        â”‚ â”‚
â”‚  â”‚                                               â”‚ â”‚
â”‚  â”‚  [  Verificar CÃ³digo  ]                      â”‚ â”‚
â”‚  â”‚                                               â”‚ â”‚
â”‚  â”‚  ğŸ“§ Reenviar cÃ³digo (disponible en 30s)      â”‚ â”‚
â”‚  â”‚  ğŸ”‘ Usar cÃ³digo de respaldo                  â”‚ â”‚
â”‚  â”‚  Cancelar                                    â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚          MFASettingsScreen.js                       â”‚
â”‚                                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  ğŸ” AutenticaciÃ³n Multi-Factor                â”‚ â”‚
â”‚  â”‚                                               â”‚ â”‚
â”‚  â”‚  Estado: âœ… Habilitado                        â”‚ â”‚
â”‚  â”‚  Habilitado el: 14/10/2025                   â”‚ â”‚
â”‚  â”‚                                               â”‚ â”‚
â”‚  â”‚  Â¿QuÃ© es MFA?                                â”‚ â”‚
â”‚  â”‚  La autenticaciÃ³n multi-factor aÃ±ade una     â”‚ â”‚
â”‚  â”‚  capa extra de seguridad...                  â”‚ â”‚
â”‚  â”‚                                               â”‚ â”‚
â”‚  â”‚  âœ¨ Beneficios:                               â”‚ â”‚
â”‚  â”‚  ğŸ”’ Mayor seguridad                          â”‚ â”‚
â”‚  â”‚  ğŸ›¡ï¸ ProtecciÃ³n contra accesos no autorizadosâ”‚ â”‚
â”‚  â”‚  ğŸ“§ NotificaciÃ³n de intentos de acceso       â”‚ â”‚
â”‚  â”‚                                               â”‚ â”‚
â”‚  â”‚  [ ğŸ”„ Regenerar CÃ³digos de Respaldo ]        â”‚ â”‚
â”‚  â”‚  [ âš ï¸ Deshabilitar MFA ]                     â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

```

---

## ğŸ“Š Estados y Transiciones

```
Usuario sin MFA
  â”‚
  â”‚ enableMFA()
  â–¼
Usuario con MFA (login normal)
  â”‚
  â”‚ login()
  â–¼
CÃ³digo enviado por email
  â”‚
  â”œâ”€ verifyMFACode() â”€â”€â–º âœ… Dashboard
  â”‚
  â”œâ”€ verifyBackupCode() â”€â”€â–º âœ… Dashboard
  â”‚                          â”‚
  â”‚                          â–¼
  â”‚                     codesRemaining--
  â”‚
  â””â”€ 5 intentos fallidos â”€â”€â–º âŒ Bloqueado
                              â”‚
                              â””â”€ verifyBackupCode() â”€â”€â–º âœ… Desbloqueado

```

---

## ğŸ”‘ Endpoints API Usados

```
Backend: http://localhost:8000/api/v1/auth-mfa/

POST   /login                  â†’ Login con MFA
POST   /verify-mfa             â†’ Verificar cÃ³digo 6 dÃ­gitos
POST   /verify-backup-code     â†’ Verificar cÃ³digo respaldo
POST   /enable-mfa             â†’ Habilitar MFA (requiere auth)
POST   /disable-mfa            â†’ Deshabilitar MFA (requiere auth)
POST   /regenerate-backup-codesâ†’ Nuevos cÃ³digos (requiere auth)
GET    /mfa-status             â†’ Estado MFA (requiere auth)
POST   /resend-code            â†’ Reenviar cÃ³digo
```

---

**Ãšltima actualizaciÃ³n:** 14 de Octubre, 2025
